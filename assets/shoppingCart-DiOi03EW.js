import{j as N,r as c,g as V,c as h,b as l,a as o,d as a,e as f,o as B,t as v,f as m,E as j}from"./index-BapS6kSh.js";const A={style:{padding:"0 1rem"}},E={style:{"font-size":"16px"}},O={style:{display:"flex","justify-content":"end"}},S={style:{display:"flex",gap:"0.5rem","align-items":"center"}},T={style:{"font-size":"24px","font-weight":"bold",padding:"0"}},J=N({__name:"shoppingCart",setup($){const b=[{id:1,name:"A品項",price:99,count:0,available:!0},{id:2,name:"B品項",price:45.5,count:0,available:!0},{id:3,name:"C品項",price:120,count:0,available:!1},{id:4,name:"D品項",price:88.8,count:0,available:!0}],p=c(!1),u=c([]),r=c([]),w=()=>{const s=u.value.filter(e=>e.count>0);if(!r.value||r.value.length===0)r.value=s;else{const e=new Map;r.value.forEach(t=>{e.set(t.name,t)}),s.forEach(t=>{const i=e.get(t.name);i?i.count+=t.count:e.set(t.name,{...t})}),r.value=Array.from(e.values())}j.success("已成功加入購物車"),u.value=JSON.parse(JSON.stringify(b)),g.value=_()},y=s=>{const e=u.value.find(t=>t.id===s);e&&e.count>0&&(e.count-=1)},C=s=>{const e=u.value.find(t=>t.id===s);e&&(e.count+=1)},_=()=>{if(r.value.length===0)return 0;const s=r.value.reduce((e,t)=>{const i=t.count*t.price;return e+i},0);return parseFloat(s.toFixed(2))},g=c(),k=s=>{s&&(r.value=[],g.value=0),p.value=!1};return V(()=>{u.value=JSON.parse(JSON.stringify(b))}),(s,e)=>{const t=f("el-table-column"),i=f("el-table"),d=f("el-button"),x=f("el-dialog");return B(),h("div",A,[l(x,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=n=>p.value=n),title:"購物車"},{default:a(()=>[o("div",E,[e[6]||(e[6]=o("h3",null,"您購買的清單如下:",-1)),l(i,{data:r.value,style:{width:"100%"}},{default:a(()=>[l(t,{prop:"name",label:"名稱"}),l(t,{prop:"count",label:"數量"}),l(t,{prop:"price",label:"價格"},{default:a(n=>[o("span",null,v(n.row.price*n.row.count),1)]),_:1})]),_:1},8,["data"]),e[7]||(e[7]=o("br",null,null,-1)),o("p",null,"總金額為："+v(g.value),1),l(d,{type:"success",onClick:e[0]||(e[0]=n=>k(!0))},{default:a(()=>[...e[4]||(e[4]=[m("確認送出",-1)])]),_:1}),l(d,{type:"danger",onClick:e[1]||(e[1]=n=>k(!1))},{default:a(()=>[...e[5]||(e[5]=[m("取消",-1)])]),_:1})])]),_:1},8,["modelValue"]),o("div",O,[l(d,{type:"primary",onClick:e[3]||(e[3]=n=>p.value=!0)},{default:a(()=>[...e[8]||(e[8]=[m("購物車",-1)])]),_:1})]),l(i,{data:u.value,style:{width:"100%"},"header-cell-style":{backgroundColor:"#C0C7D8",color:"black"}},{default:a(()=>[l(t,{prop:"id",width:"180"}),l(t,{prop:"name",label:"名稱"}),l(t,{prop:"price",label:"價格(單個)"}),l(t,{prop:"available",label:"是否有存貨"},{default:a(n=>[o("span",null,v(n.row.available?"有":"無"),1)]),_:1}),l(t,{prop:"count",label:"數量"},{default:a(n=>[o("div",S,[l(d,{onClick:M=>C(n.row.id)},{default:a(()=>[...e[9]||(e[9]=[o("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M2 8H14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),o("path",{d:"M8 2V14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),_:1},8,["onClick"]),o("span",T,v(n.row.count),1),l(d,{onClick:M=>y(n.row.id)},{default:a(()=>[...e[10]||(e[10]=[o("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M2 8H14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),e[12]||(e[12]=o("br",null,null,-1)),l(d,{type:"success",onClick:w},{default:a(()=>[...e[11]||(e[11]=[m("加入購物車",-1)])]),_:1})])}}});export{J as default};
