import{d as F,r as c,k as H,h as J,l as L,c as b,b as o,a as n,w as M,e as a,f,F as N,i as O,v as S,t as r,g as m,m as W,E as U,o as w,_ as R}from"./index-IbMxLRdS.js";const K={style:{padding:"0 1rem"}},P={style:{"font-size":"16px"}},q={style:{"font-size":"16px"}},G={style:{display:"flex","align-items":"center","justify-content":"center","background-color":"beige"}},Q={style:{display:"flex","justify-content":"end"}},X={style:{display:"flex","flex-direction":"column","align-items":"center"}},Y={style:{display:"flex",gap:"0.5rem","align-items":"center"}},Z={style:{"font-size":"24px","font-weight":"bold",padding:"0"}},ee=768,te=F({__name:"shoppingCart",setup(le){const x=[{id:1,name:"A品項",price:99,count:0,available:!0},{id:2,name:"B品項",price:45.5,count:0,available:!0},{id:3,name:"C品項",price:120,count:0,available:!1},{id:4,name:"D品項",price:88.8,count:0,available:!0}],y=c(!1),g=c(!1),d=c([]),u=c([]),k=c([]),V=c(window.innerWidth),B=H(()=>V.value<=ee),z=()=>{const s=d.value.filter(e=>e.count>0);if(!u.value||u.value.length===0)u.value=s;else{const e=new Map;u.value.forEach(l=>{e.set(l.name,l)}),s.forEach(l=>{const i=e.get(l.name);i?i.count+=l.count:e.set(l.name,{...l})}),u.value=Array.from(e.values())}U.success("已成功加入購物車"),d.value=JSON.parse(JSON.stringify(x)),_.value=$()},A=s=>{const e=d.value.find(l=>l.id===s);e&&e.count>0&&(e.count-=1)},T=s=>{const e=d.value.find(l=>l.id===s);e&&(e.count+=1)},$=()=>{if(u.value.length===0)return 0;const s=u.value.reduce((e,l)=>{const i=l.count*l.price;return e+i},0);return parseFloat(s.toFixed(2))},_=c(),E=s=>{s&&(U.success("已成功送出訂單"),k.value.push(u.value),console.log(k.value[1]),u.value=[],_.value=0),g.value=!1},C=()=>{V.value=window.innerWidth};return J(()=>{d.value=JSON.parse(JSON.stringify(x)),C(),window.addEventListener("resize",C)}),L(()=>{window.removeEventListener("resize",C)}),(s,e)=>{const l=f("el-table-column"),i=f("el-table"),p=f("el-button"),h=f("el-dialog"),j=f("el-input"),D=f("el-card");return w(),b("div",K,[o(h,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t),title:"購物車"},{default:a(()=>[n("div",P,[e[8]||(e[8]=n("h3",null,"您購買的清單如下:",-1)),o(i,{data:u.value,style:{width:"100%"}},{default:a(()=>[o(l,{prop:"name",label:"名稱"}),o(l,{prop:"count",label:"數量"}),o(l,{prop:"price",label:"價格"},{default:a(t=>[n("span",null,r(t.row.price*t.row.count),1)]),_:1})]),_:1},8,["data"]),e[9]||(e[9]=n("br",null,null,-1)),n("p",null,"總金額為："+r(_.value),1),o(p,{type:"success",onClick:e[0]||(e[0]=t=>E(!0))},{default:a(()=>[...e[6]||(e[6]=[m("確認送出",-1)])]),_:1}),o(p,{type:"danger",onClick:e[1]||(e[1]=t=>E(!1))},{default:a(()=>[...e[7]||(e[7]=[m("取消",-1)])]),_:1})])]),_:1},8,["modelValue"]),o(h,{modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=t=>y.value=t),title:"歷史訂單"},{default:a(()=>[n("div",q,[(w(!0),b(N,null,O(k.value,(t,v)=>(w(),b("div",{key:v},[n("p",G," 第"+r(v+1)+"筆 ",1),o(i,{data:t,style:{width:"100%"}},{default:a(()=>[o(l,{prop:"name",label:"名稱"}),o(l,{prop:"count",label:"數量"}),o(l,{prop:"price",label:"價格"},{default:a(I=>[n("span",null,r(I.row.price*I.row.count),1)]),_:1})]),_:1},8,["data"]),e[10]||(e[10]=n("br",null,null,-1))]))),128))])]),_:1},8,["modelValue"]),n("div",Q,[o(p,{type:"primary",onClick:e[4]||(e[4]=t=>y.value=!0)},{default:a(()=>[...e[11]||(e[11]=[m("歷史訂單",-1)])]),_:1}),o(p,{type:"primary",onClick:e[5]||(e[5]=t=>g.value=!0)},{default:a(()=>[...e[12]||(e[12]=[m("購物車",-1)])]),_:1})]),(w(!0),b(N,null,O(d.value,t=>M((w(),W(D,{key:t.id,value:t.count,style:{margin:"0.5rem"}},{default:a(()=>[n("div",X,[n("p",null,r(t.id),1),n("p",null,"名稱： "+r(t.name),1),n("p",null,"價格(單個)： "+r(t.price),1),n("p",null,"是否有存貨： "+r(t.available?"有":"無"),1),e[13]||(e[13]=n("p",null,"數量：",-1)),o(j,{modelValue:t.count,"onUpdate:modelValue":v=>t.count=v},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1032,["value"])),[[S,B.value]])),128)),M(o(i,{data:d.value,class:"responsive-car-table",style:{width:"100%"},"header-cell-style":{backgroundColor:"#C0C7D8",color:"black"}},{default:a(()=>[o(l,{prop:"id"}),o(l,{prop:"name",label:"名稱"}),o(l,{prop:"price",label:"價格(單個)"}),o(l,{prop:"available",label:"是否有存貨"},{default:a(t=>[n("span",null,r(t.row.available?"有":"無"),1)]),_:1}),o(l,{prop:"count",label:"數量"},{default:a(t=>[n("div",Y,[o(p,{onClick:v=>T(t.row.id)},{default:a(()=>[...e[14]||(e[14]=[n("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M2 8H14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),n("path",{d:"M8 2V14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),_:1},8,["onClick"]),n("span",Z,r(t.row.count),1),o(p,{onClick:v=>A(t.row.id)},{default:a(()=>[...e[15]||(e[15]=[n("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M2 8H14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),[[S,!B.value]]),e[17]||(e[17]=n("br",null,null,-1)),o(p,{type:"success",onClick:z},{default:a(()=>[...e[16]||(e[16]=[m("加入購物車",-1)])]),_:1})])}}}),oe=R(te,[["__scopeId","data-v-ebbec518"]]);export{oe as default};
