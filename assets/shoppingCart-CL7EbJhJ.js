import{d as T,r as v,k as U,h as z,l as $,c as h,b as o,a as n,w as V,e as a,f as c,F as j,i as D,v as B,t as i,g as m,m as F,o as b,E as J,_ as L}from"./index-Daf2Nixu.js";const W={style:{padding:"0 1rem"}},H={style:{"font-size":"16px"}},R={style:{display:"flex","justify-content":"end"}},K={style:{display:"flex","flex-direction":"column","align-items":"center"}},P={style:{display:"flex",gap:"0.5rem","align-items":"center"}},q={style:{"font-size":"24px","font-weight":"bold",padding:"0"}},G=768,Q=T({__name:"shoppingCart",setup(X){const k=[{id:1,name:"A品項",price:99,count:0,available:!0},{id:2,name:"B品項",price:45.5,count:0,available:!0},{id:3,name:"C品項",price:120,count:0,available:!1},{id:4,name:"D品項",price:88.8,count:0,available:!0}],f=v(!1),u=v([]),r=v([]),y=v(window.innerWidth),C=U(()=>y.value<=G),E=()=>{const s=u.value.filter(e=>e.count>0);if(!r.value||r.value.length===0)r.value=s;else{const e=new Map;r.value.forEach(t=>{e.set(t.name,t)}),s.forEach(t=>{const d=e.get(t.name);d?d.count+=t.count:e.set(t.name,{...t})}),r.value=Array.from(e.values())}J.success("已成功加入購物車"),u.value=JSON.parse(JSON.stringify(k)),w.value=S()},M=s=>{const e=u.value.find(t=>t.id===s);e&&e.count>0&&(e.count-=1)},N=s=>{const e=u.value.find(t=>t.id===s);e&&(e.count+=1)},S=()=>{if(r.value.length===0)return 0;const s=r.value.reduce((e,t)=>{const d=t.count*t.price;return e+d},0);return parseFloat(s.toFixed(2))},w=v(),x=s=>{s&&(r.value=[],w.value=0),f.value=!1},g=()=>{y.value=window.innerWidth};return z(()=>{u.value=JSON.parse(JSON.stringify(k)),g(),window.addEventListener("resize",g)}),$(()=>{window.removeEventListener("resize",g)}),(s,e)=>{const t=c("el-table-column"),d=c("el-table"),p=c("el-button"),I=c("el-dialog"),O=c("el-input"),A=c("el-card");return b(),h("div",W,[o(I,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),title:"購物車"},{default:a(()=>[n("div",H,[e[6]||(e[6]=n("h3",null,"您購買的清單如下:",-1)),o(d,{data:r.value,style:{width:"100%"}},{default:a(()=>[o(t,{prop:"name",label:"名稱"}),o(t,{prop:"count",label:"數量"}),o(t,{prop:"price",label:"價格"},{default:a(l=>[n("span",null,i(l.row.price*l.row.count),1)]),_:1})]),_:1},8,["data"]),e[7]||(e[7]=n("br",null,null,-1)),n("p",null,"總金額為："+i(w.value),1),o(p,{type:"success",onClick:e[0]||(e[0]=l=>x(!0))},{default:a(()=>[...e[4]||(e[4]=[m("確認送出",-1)])]),_:1}),o(p,{type:"danger",onClick:e[1]||(e[1]=l=>x(!1))},{default:a(()=>[...e[5]||(e[5]=[m("取消",-1)])]),_:1})])]),_:1},8,["modelValue"]),n("div",R,[o(p,{type:"primary",onClick:e[3]||(e[3]=l=>f.value=!0)},{default:a(()=>[...e[8]||(e[8]=[m("購物車",-1)])]),_:1})]),(b(!0),h(j,null,D(u.value,l=>V((b(),F(A,{key:l.id,value:l.count,style:{margin:"0.5rem"}},{default:a(()=>[n("div",K,[n("p",null,i(l.id),1),n("p",null,"名稱： "+i(l.name),1),n("p",null,"價格(單個)： "+i(l.price),1),n("p",null,"是否有存貨： "+i(l.available?"有":"無"),1),e[9]||(e[9]=n("p",null,"數量：",-1)),o(O,{modelValue:l.count,"onUpdate:modelValue":_=>l.count=_},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1032,["value"])),[[B,C.value]])),128)),V(o(d,{data:u.value,class:"responsive-car-table",style:{width:"100%"},"header-cell-style":{backgroundColor:"#C0C7D8",color:"black"}},{default:a(()=>[o(t,{prop:"id"}),o(t,{prop:"name",label:"名稱"}),o(t,{prop:"price",label:"價格(單個)"}),o(t,{prop:"available",label:"是否有存貨"},{default:a(l=>[n("span",null,i(l.row.available?"有":"無"),1)]),_:1}),o(t,{prop:"count",label:"數量"},{default:a(l=>[n("div",P,[o(p,{onClick:_=>N(l.row.id)},{default:a(()=>[...e[10]||(e[10]=[n("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M2 8H14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),n("path",{d:"M8 2V14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),_:1},8,["onClick"]),n("span",q,i(l.row.count),1),o(p,{onClick:_=>M(l.row.id)},{default:a(()=>[...e[11]||(e[11]=[n("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M2 8H14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),[[B,!C.value]]),e[13]||(e[13]=n("br",null,null,-1)),o(p,{type:"success",onClick:E},{default:a(()=>[...e[12]||(e[12]=[m("加入購物車",-1)])]),_:1})])}}}),Z=L(Q,[["__scopeId","data-v-5ab63d55"]]);export{Z as default};
